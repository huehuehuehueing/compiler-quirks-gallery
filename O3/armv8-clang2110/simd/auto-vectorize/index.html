
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
        
      
      
      <link rel="icon" href="../../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>auto-vectorize - Compiler Optimization Gallery</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../custom.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#auto-vectorize" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Compiler Optimization Gallery" class="md-header__button md-logo" aria-label="Compiler Optimization Gallery" data-md-component="logo">
      
  <img src="../../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Compiler Optimization Gallery
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              auto-vectorize
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Compiler Optimization Gallery" class="md-nav__button md-logo" aria-label="Compiler Optimization Gallery" data-md-component="logo">
      
  <img src="../../../../assets/logo.png" alt="logo">

    </a>
    Compiler Optimization Gallery
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../compilers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Compilers
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../O0/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    O0 - No Optimization
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    O0 - No Optimization
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/armv7-clang2110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    armv7-clang2110
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/armv8-clang2110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    armv8-clang2110
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/avrg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    avrg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/cg152/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cg152
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/clang1910/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    clang1910
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/cmingw64_ucrt_gcc_1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cmingw64_ucrt_gcc_1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/csparc64g1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csparc64g1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/csparcg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csparcg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/mipsg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mipsg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/vc_v19_44_VS17_14_x64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vc_v19_44_VS17_14_x64
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O0/vc_v19_44_VS17_14_x86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vc_v19_44_VS17_14_x86
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../O2/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    O2 - Standard Optimization
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    O2 - Standard Optimization
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/armv7-clang2110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    armv7-clang2110
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/armv8-clang2110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    armv8-clang2110
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/avrg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    avrg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/cg152/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cg152
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/clang1910/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    clang1910
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/cmingw64_ucrt_gcc_1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cmingw64_ucrt_gcc_1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/csparc64g1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csparc64g1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/csparcg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csparcg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/mipsg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mipsg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/vc_v19_44_VS17_14_x64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vc_v19_44_VS17_14_x64
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../O2/vc_v19_44_VS17_14_x86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vc_v19_44_VS17_14_x86
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    O3 - Aggressive Optimization
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    O3 - Aggressive Optimization
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../armv7-clang2110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    armv7-clang2110
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    armv8-clang2110
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../avrg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    avrg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cg152/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cg152
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clang1910/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    clang1910
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cmingw64_ucrt_gcc_1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cmingw64_ucrt_gcc_1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../csparc64g1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csparc64g1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../csparcg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csparcg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../mipsg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mipsg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../vc_v19_44_VS17_14_x64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vc_v19_44_VS17_14_x64
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../vc_v19_44_VS17_14_x86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vc_v19_44_VS17_14_x86
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../Ofast/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Ofast - Fast Math Optimization
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Ofast - Fast Math Optimization
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/armv7-clang2110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    armv7-clang2110
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/armv8-clang2110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    armv8-clang2110
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/avrg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    avrg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/cg152/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cg152
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/clang1910/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    clang1910
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/cmingw64_ucrt_gcc_1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cmingw64_ucrt_gcc_1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/csparc64g1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csparc64g1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/csparcg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csparcg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/mipsg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mipsg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/vc_v19_44_VS17_14_x64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vc_v19_44_VS17_14_x64
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Ofast/vc_v19_44_VS17_14_x86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vc_v19_44_VS17_14_x86
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../Os/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Os - Size Optimization
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Os - Size Optimization
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/armv7-clang2110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    armv7-clang2110
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/armv8-clang2110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    armv8-clang2110
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/avrg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    avrg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/cg152/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cg152
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/clang1910/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    clang1910
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/cmingw64_ucrt_gcc_1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cmingw64_ucrt_gcc_1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/csparc64g1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csparc64g1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/csparcg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csparcg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/mipsg1520/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mipsg1520
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/vc_v19_44_VS17_14_x64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vc_v19_44_VS17_14_x64
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Os/vc_v19_44_VS17_14_x86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vc_v19_44_VS17_14_x86
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source Code
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assembly-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Assembly Output
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#explanation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Explanation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Explanation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-insight-vectorization-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Insight: Vectorization Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_arrays-function" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_arrays Function
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sum_array-function" class="md-nav__link">
    <span class="md-ellipsis">
      
        sum_array Function
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fibonacci_array-function" class="md-nav__link">
    <span class="md-ellipsis">
      
        fibonacci_array Function
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="auto-vectorize">auto-vectorize<a class="headerlink" href="#auto-vectorize" title="Permanent link">&para;</a></h1>
<div class="admonition info">
<p class="admonition-title">Details</p>
<p><strong>Source:</strong> <code>simd/auto-vectorize.c</code>
<strong>Compiler:</strong> armv8-clang2110 (ARM)
<strong>Scenario:</strong> O3 - Aggressive Optimization (<code>-O3</code>)</p>
</div>
<h2 id="source-code">Source Code<a class="headerlink" href="#source-code" title="Permanent link">&para;</a></h2>
<div class="highlight"><span class="filename">auto-vectorize.c</span><pre><span></span><code><span class="cm">/*</span>
<span class="cm"> * Auto-vectorization: loops converted to SIMD operations.</span>
<span class="cm"> *</span>
<span class="cm"> * Compiler transforms scalar loops into vector operations</span>
<span class="cm"> * (SSE, AVX, NEON, etc.) processing multiple elements at once.</span>
<span class="cm"> */</span>

<span class="cm">/* Simple loop - prime candidate for vectorization */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">add_arrays</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">dst</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">dst</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="cm">/* With -O3: becomes SIMD adds processing 4-8 floats at once */</span>
<span class="p">}</span>

<span class="cm">/* Reduction - trickier to vectorize but often done */</span>
<span class="kt">float</span><span class="w"> </span><span class="nf">sum_array</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">sum</span><span class="p">;</span>
<span class="w">    </span><span class="cm">/* May use horizontal add instructions or partial sums */</span>
<span class="p">}</span>

<span class="cm">/* Loop with dependency - CANNOT be vectorized */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">fibonacci_array</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="cm">/* Each iteration depends on previous two - serial */</span>
<span class="w">        </span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="mi">-1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="mi">-2</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* Conditional in loop - may use masked operations */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">clamp_array</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">min</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">max</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">min</span><span class="p">)</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">min</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max</span><span class="p">)</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="assembly-output">Assembly Output<a class="headerlink" href="#assembly-output" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">auto-vectorize.asm</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nf">add_arrays</span><span class="p">(</span><span class="no">float</span><span class="p">*,</span><span class="w"> </span><span class="no">float</span><span class="w"> </span><span class="no">const</span><span class="p">*,</span><span class="w"> </span><span class="no">float</span><span class="w"> </span><span class="no">const</span><span class="p">*,</span><span class="w"> </span><span class="no">int</span><span class="p">):</span>
<span class="w">        </span><span class="nf">cmp</span><span class="w">     </span><span class="no">w3</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span>
<span class="w">        </span><span class="nf">b.lt</span><span class="w">    </span><span class="no">.LBB0_5</span>
<span class="w">        </span><span class="nf">cmp</span><span class="w">     </span><span class="no">w3</span><span class="p">,</span><span class="w"> </span><span class="mi">#8</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">w8</span><span class="p">,</span><span class="w"> </span><span class="no">w3</span>
<span class="w">        </span><span class="nf">b.hs</span><span class="w">    </span><span class="no">.LBB0_6</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="no">xzr</span>
<span class="nl">.LBB0_3:</span>
<span class="w">        </span><span class="nf">lsl</span><span class="w">     </span><span class="no">x12</span><span class="p">,</span><span class="w"> </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="mi">#2</span>
<span class="w">        </span><span class="nf">sub</span><span class="w">     </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="no">x9</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="no">x12</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x11</span><span class="p">,</span><span class="w"> </span><span class="no">x2</span><span class="p">,</span><span class="w"> </span><span class="no">x12</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x12</span><span class="p">,</span><span class="w"> </span><span class="no">x1</span><span class="p">,</span><span class="w"> </span><span class="no">x12</span>
<span class="nl">.LBB0_4:</span>
<span class="w">        </span><span class="nf">ldr</span><span class="w">     </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x12</span><span class="p">],</span><span class="w"> </span><span class="mi">#4</span>
<span class="w">        </span><span class="nf">subs</span><span class="w">    </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span>
<span class="w">        </span><span class="nf">ldr</span><span class="w">     </span><span class="no">s1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x11</span><span class="p">],</span><span class="w"> </span><span class="mi">#4</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s1</span>
<span class="w">        </span><span class="nf">str</span><span class="w">     </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x10</span><span class="p">],</span><span class="w"> </span><span class="mi">#4</span>
<span class="w">        </span><span class="nf">b.ne</span><span class="w">    </span><span class="no">.LBB0_4</span>
<span class="nl">.LBB0_5:</span>
<span class="w">        </span><span class="nf">ret</span>
<span class="nl">.LBB0_6:</span>
<span class="w">        </span><span class="nf">sub</span><span class="w">     </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="no">x1</span>
<span class="w">        </span><span class="nf">cmp</span><span class="w">     </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="mi">#32</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="no">xzr</span>
<span class="w">        </span><span class="nf">b.lo</span><span class="w">    </span><span class="no">.LBB0_3</span>
<span class="w">        </span><span class="nf">sub</span><span class="w">     </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="no">x2</span>
<span class="w">        </span><span class="nf">cmp</span><span class="w">     </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="mi">#32</span>
<span class="w">        </span><span class="nf">b.lo</span><span class="w">    </span><span class="no">.LBB0_3</span>
<span class="w">        </span><span class="nf">and</span><span class="w">     </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">x7ffffff8</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">#16</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x11</span><span class="p">,</span><span class="w"> </span><span class="no">x2</span><span class="p">,</span><span class="w"> </span><span class="mi">#16</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x12</span><span class="p">,</span><span class="w"> </span><span class="no">x1</span><span class="p">,</span><span class="w"> </span><span class="mi">#16</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">x13</span><span class="p">,</span><span class="w"> </span><span class="no">x9</span>
<span class="nl">.LBB0_9:</span>
<span class="w">        </span><span class="nf">ldp</span><span class="w">     </span><span class="no">q0</span><span class="p">,</span><span class="w"> </span><span class="no">q3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x11</span><span class="p">,</span><span class="w"> </span><span class="mi">#-16</span><span class="p">]</span>
<span class="w">        </span><span class="nf">subs</span><span class="w">    </span><span class="no">x13</span><span class="p">,</span><span class="w"> </span><span class="no">x13</span><span class="p">,</span><span class="w"> </span><span class="mi">#8</span>
<span class="w">        </span><span class="nf">ldp</span><span class="w">     </span><span class="no">q1</span><span class="p">,</span><span class="w"> </span><span class="no">q2</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x12</span><span class="p">,</span><span class="w"> </span><span class="mi">#-16</span><span class="p">]</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x11</span><span class="p">,</span><span class="w"> </span><span class="no">x11</span><span class="p">,</span><span class="w"> </span><span class="mi">#32</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x12</span><span class="p">,</span><span class="w"> </span><span class="no">x12</span><span class="p">,</span><span class="w"> </span><span class="mi">#32</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">v0.4s</span><span class="p">,</span><span class="w"> </span><span class="no">v1.4s</span><span class="p">,</span><span class="w"> </span><span class="no">v0.4s</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">v1.4s</span><span class="p">,</span><span class="w"> </span><span class="no">v2.4s</span><span class="p">,</span><span class="w"> </span><span class="no">v3.4s</span>
<span class="w">        </span><span class="nf">stp</span><span class="w">     </span><span class="no">q0</span><span class="p">,</span><span class="w"> </span><span class="no">q1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="mi">#-16</span><span class="p">]</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="mi">#32</span>
<span class="w">        </span><span class="nf">b.ne</span><span class="w">    </span><span class="no">.LBB0_9</span>
<span class="w">        </span><span class="nf">cmp</span><span class="w">     </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="no">x8</span>
<span class="w">        </span><span class="nf">b.ne</span><span class="w">    </span><span class="no">.LBB0_3</span>
<span class="w">        </span><span class="nf">b</span><span class="w">       </span><span class="no">.LBB0_5</span>

<span class="nf">sum_array</span><span class="p">(</span><span class="no">float</span><span class="w"> </span><span class="no">const</span><span class="p">*,</span><span class="w"> </span><span class="no">int</span><span class="p">):</span>
<span class="w">        </span><span class="nf">cmp</span><span class="w">     </span><span class="no">w1</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span>
<span class="w">        </span><span class="nf">b.lt</span><span class="w">    </span><span class="no">.LBB1_3</span>
<span class="w">        </span><span class="nf">movi</span><span class="w">    </span><span class="no">d0</span><span class="p">,</span><span class="w"> </span><span class="mi">#0000000000000000</span>
<span class="w">        </span><span class="nf">cmp</span><span class="w">     </span><span class="no">w1</span><span class="p">,</span><span class="w"> </span><span class="mi">#8</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">w8</span><span class="p">,</span><span class="w"> </span><span class="no">w1</span>
<span class="w">        </span><span class="nf">b.hs</span><span class="w">    </span><span class="no">.LBB1_4</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="no">xzr</span>
<span class="w">        </span><span class="nf">b</span><span class="w">       </span><span class="no">.LBB1_7</span>
<span class="nl">.LBB1_3:</span>
<span class="w">        </span><span class="nf">movi</span><span class="w">    </span><span class="no">d0</span><span class="p">,</span><span class="w"> </span><span class="mi">#0000000000000000</span>
<span class="w">        </span><span class="nf">ret</span>
<span class="nl">.LBB1_4:</span>
<span class="w">        </span><span class="nf">and</span><span class="w">     </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">x7ffffff8</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">#16</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">x11</span><span class="p">,</span><span class="w"> </span><span class="no">x9</span>
<span class="nl">.LBB1_5:</span>
<span class="w">        </span><span class="nf">ldp</span><span class="w">     </span><span class="no">q1</span><span class="p">,</span><span class="w"> </span><span class="no">q2</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="mi">#-16</span><span class="p">]</span>
<span class="w">        </span><span class="nf">subs</span><span class="w">    </span><span class="no">x11</span><span class="p">,</span><span class="w"> </span><span class="no">x11</span><span class="p">,</span><span class="w"> </span><span class="mi">#8</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="mi">#32</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">s3</span><span class="p">,</span><span class="w"> </span><span class="no">v1.s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s1</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">s4</span><span class="p">,</span><span class="w"> </span><span class="no">v1.s</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">s1</span><span class="p">,</span><span class="w"> </span><span class="no">v1.s</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s3</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">s3</span><span class="p">,</span><span class="w"> </span><span class="no">v2.s</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s4</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s1</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">s1</span><span class="p">,</span><span class="w"> </span><span class="no">v2.s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s2</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s1</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">s1</span><span class="p">,</span><span class="w"> </span><span class="no">v2.s</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s3</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s1</span>
<span class="w">        </span><span class="nf">b.ne</span><span class="w">    </span><span class="no">.LBB1_5</span>
<span class="w">        </span><span class="nf">cmp</span><span class="w">     </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="no">x8</span>
<span class="w">        </span><span class="nf">b.eq</span><span class="w">    </span><span class="no">.LBB1_9</span>
<span class="nl">.LBB1_7:</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="no">lsl</span><span class="w"> </span><span class="mi">#2</span>
<span class="w">        </span><span class="nf">sub</span><span class="w">     </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="no">x9</span>
<span class="nl">.LBB1_8:</span>
<span class="w">        </span><span class="nf">ldr</span><span class="w">     </span><span class="no">s1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x10</span><span class="p">],</span><span class="w"> </span><span class="mi">#4</span>
<span class="w">        </span><span class="nf">subs</span><span class="w">    </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span>
<span class="w">        </span><span class="nf">fadd</span><span class="w">    </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s1</span>
<span class="w">        </span><span class="nf">b.ne</span><span class="w">    </span><span class="no">.LBB1_8</span>
<span class="nl">.LBB1_9:</span>
<span class="w">        </span><span class="nf">ret</span>

<span class="nl">.LCPI2_0:</span>
<span class="w">        </span><span class="na">.word</span><span class="w">   </span><span class="mi">0</span>
<span class="w">        </span><span class="na">.word</span><span class="w">   </span><span class="mi">1</span>
<span class="nf">fibonacci_array</span><span class="p">(</span><span class="no">int</span><span class="p">*,</span><span class="w"> </span><span class="no">int</span><span class="p">):</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="no">.LCPI2_0</span>
<span class="w">        </span><span class="nf">cmp</span><span class="w">     </span><span class="no">w1</span><span class="p">,</span><span class="w"> </span><span class="mi">#3</span>
<span class="w">        </span><span class="nf">ldr</span><span class="w">     </span><span class="no">d0</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="p">:</span><span class="no">lo12</span><span class="p">:.</span><span class="no">LCPI2_0</span><span class="p">]</span>
<span class="w">        </span><span class="nf">str</span><span class="w">     </span><span class="no">d0</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x0</span><span class="p">]</span>
<span class="w">        </span><span class="nf">b.lt</span><span class="w">    </span><span class="no">.LBB2_3</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">w10</span><span class="p">,</span><span class="w"> </span><span class="no">w1</span>
<span class="w">        </span><span class="nf">ldr</span><span class="w">     </span><span class="no">w8</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">#4</span><span class="p">]</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">#8</span>
<span class="w">        </span><span class="nf">sub</span><span class="w">     </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="mi">#2</span>
<span class="nl">.LBB2_2:</span>
<span class="w">        </span><span class="nf">ldur</span><span class="w">    </span><span class="no">w11</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x9</span><span class="p">,</span><span class="w"> </span><span class="mi">#-8</span><span class="p">]</span>
<span class="w">        </span><span class="nf">subs</span><span class="w">    </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">w8</span><span class="p">,</span><span class="w"> </span><span class="no">w11</span><span class="p">,</span><span class="w"> </span><span class="no">w8</span>
<span class="w">        </span><span class="nf">str</span><span class="w">     </span><span class="no">w8</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x9</span><span class="p">],</span><span class="w"> </span><span class="mi">#4</span>
<span class="w">        </span><span class="nf">b.ne</span><span class="w">    </span><span class="no">.LBB2_2</span>
<span class="nl">.LBB2_3:</span>
<span class="w">        </span><span class="nf">ret</span>

<span class="nf">clamp_array</span><span class="p">(</span><span class="no">float</span><span class="p">*,</span><span class="w"> </span><span class="no">int</span><span class="p">,</span><span class="w"> </span><span class="no">float</span><span class="p">,</span><span class="w"> </span><span class="no">float</span><span class="p">):</span>
<span class="w">        </span><span class="nf">cmp</span><span class="w">     </span><span class="no">w1</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span>
<span class="w">        </span><span class="nf">b.lt</span><span class="w">    </span><span class="no">.LBB3_6</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">w8</span><span class="p">,</span><span class="w"> </span><span class="no">w1</span>
<span class="w">        </span><span class="nf">b</span><span class="w">       </span><span class="no">.LBB3_4</span>
<span class="nl">.LBB3_2:</span>
<span class="w">        </span><span class="nf">str</span><span class="w">     </span><span class="no">s2</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x0</span><span class="p">]</span>
<span class="nl">.LBB3_3:</span>
<span class="w">        </span><span class="nf">subs</span><span class="w">    </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">#4</span>
<span class="w">        </span><span class="nf">b.eq</span><span class="w">    </span><span class="no">.LBB3_6</span>
<span class="nl">.LBB3_4:</span>
<span class="w">        </span><span class="nf">ldr</span><span class="w">     </span><span class="no">s3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">x0</span><span class="p">]</span>
<span class="w">        </span><span class="nf">fmov</span><span class="w">    </span><span class="no">s2</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span>
<span class="w">        </span><span class="nf">fcmp</span><span class="w">    </span><span class="no">s3</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span>
<span class="w">        </span><span class="nf">b.mi</span><span class="w">    </span><span class="no">.LBB3_2</span>
<span class="w">        </span><span class="nf">fmov</span><span class="w">    </span><span class="no">s2</span><span class="p">,</span><span class="w"> </span><span class="no">s1</span>
<span class="w">        </span><span class="nf">fcmp</span><span class="w">    </span><span class="no">s3</span><span class="p">,</span><span class="w"> </span><span class="no">s1</span>
<span class="w">        </span><span class="nf">b.gt</span><span class="w">    </span><span class="no">.LBB3_2</span>
<span class="w">        </span><span class="nf">b</span><span class="w">       </span><span class="no">.LBB3_3</span>
<span class="nl">.LBB3_6:</span>
<span class="w">        </span><span class="nf">ret</span>
</code></pre></div></td></tr></table></div>
<h2 id="explanation">Explanation<a class="headerlink" href="#explanation" title="Permanent link">&para;</a></h2>
<p>the key patterns, how the compiler optimized each function, and what's happening at the instruction level.</p>
<h3 id="key-insight-vectorization-strategy">Key Insight: Vectorization Strategy<a class="headerlink" href="#key-insight-vectorization-strategy" title="Permanent link">&para;</a></h3>
<p>The compiler has applied <strong>auto-vectorization</strong> (SIMD optimization) to the first two functions, converting scalar loops into vector operations that process multiple floats simultaneously. The last two functions show why vectorization isn't always possibleone has data dependencies that prevent parallelization, and the other has conditional logic that complicates vectorization.</p>
<hr />
<h3 id="add_arrays-function"><code>add_arrays</code> Function<a class="headerlink" href="#add_arrays-function" title="Permanent link">&para;</a></h3>
<p>This is the clearest example of vectorization. The function adds two arrays element-by-element.</p>
<p><strong>The Strategy:</strong>
The compiler splits this into two paths:
1. <strong>Scalar path</strong> (<code>.LBB0_3</code>/<code>.LBB0_4</code>): Processes one float at a time using single-precision registers
2. <strong>Vector path</strong> (<code>.LBB0_9</code>): Processes 8 floats at once using NEON vector registers</p>
<p><strong>Vector Path Explanation:</strong></p>
<div class="highlight"><pre><span></span><code>ldp     q0, q3, [x11, #-16]    // Load 8 floats from array b (two 128-bit vectors)
ldp     q1, q2, [x12, #-16]    // Load 8 floats from array a
fadd    v0.4s, v1.4s, v0.4s    // Add first 4 floats: a[0..3] + b[0..3]
fadd    v1.4s, v2.4s, v3.4s    // Add next 4 floats: a[4..7] + b[4..7]
stp     q0, q1, [x10, #-16]    // Store both results (8 floats total)
</code></pre></div>
<p>The <code>.4s</code> suffix means "4 single-precision floats"each <code>q</code> register holds 128 bits, which fits exactly 4 floats. By doing two of these operations per loop iteration, the compiler processes 8 floats per iteration instead of 1.</p>
<p><strong>Why Two Paths?</strong>
Before vectorizing, the compiler checks if the arrays might overlap in memory (lines checking <code>x9</code> and <code>x10</code> against <code>#32</code>). If they do, vectorization could produce incorrect results, so it falls back to the scalar loop.</p>
<hr />
<h3 id="sum_array-function"><code>sum_array</code> Function<a class="headerlink" href="#sum_array-function" title="Permanent link">&para;</a></h3>
<p>This function accumulates a sumtrickier to vectorize because each iteration depends on the previous result.</p>
<p><strong>The Vectorization Trick:</strong>
Instead of a traditional reduction (which requires sequential operations), the compiler loads 8 floats at once and extracts individual elements:</p>
<div class="highlight"><pre><span></span><code>ldp     q1, q2, [x10, #-16]    // Load 8 floats into two vectors
mov     s3, v1.s[1]            // Extract element [1] from first vector
fadd    s0, s0, s1             // Add element [0]
mov     s4, v1.s[2]            // Extract element [2]
fadd    s0, s0, s3             // Add element [1]
// ... continues for all 8 elements
</code></pre></div>
<p>This processes 8 floats per iteration but uses <strong>horizontal operations</strong> (extracting and adding individual elements) rather than true parallel addition. It's still faster than scalar because it reduces memory load overheadloading 8 floats at once is more efficient than loading them one at a time.</p>
<p><strong>Scalar Cleanup:</strong>
After the vectorized loop, if <code>n</code> isn't a multiple of 8, the scalar loop (<code>.LBB1_8</code>) handles remaining elements one at a time.</p>
<hr />
<h3 id="fibonacci_array-function"><code>fibonacci_array</code> Function<a class="headerlink" href="#fibonacci_array-function" title="Permanent link">&para;</a></h3>
<p>This function <strong>cannot be vectorized</strong>notice there's no vector code at all.</p>
<p><strong>Why?</strong> Each element depends on the two previous elements:
<div class="highlight"><pre><span></span><code><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="mi">-1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="mi">-2</span><span class="p">]</span>
</code></pre></div></p>
<p>The compiler cannot parallelize this because:
- To compute <code>arr[2]</code>, you need <code>arr[1]</code> and <code>arr[0]</code>
- To compute <code>arr[3]</code>, you need <code>arr[2]</code> (which you just computed) and <code>arr[1]</code>
- Each iteration must wait for the previous one to finish</p>
<p>The assembly shows a simple scalar loop:
```
ldur    w11, [x9, #-8]         // Load arr[i-1]
add     w</p>
<hr />
<p><a href="../../"> Back to armv8-clang2110</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": ["content.code.copy", "navigation.sections", "navigation.indexes", "navigation.top", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>